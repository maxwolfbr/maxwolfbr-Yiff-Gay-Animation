<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiverso Gay NSFW â€¢ Galeria 18+</title>
<meta name="theme-color" content="#000000">

<style>
/* ==== BLOGGER SAFE RESET ==== */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  width: 100% !important;
  height: 100% !important;
  background: #000 !important;
  overflow: hidden !important;
}

/* Esconde layout do Blogger sem quebrar DOM */
body > *:not(#app-root) {
  display: none !important;
}

/* ==== APP ROOT ==== */
#app-root {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
  background: radial-gradient(circle at top,#1b1b1b,#000);
  color: #eee;
  font-family: system-ui,-apple-system,Segoe UI,Roboto;
  z-index: 999999;
}

/* ==== APP STYLES ==== */
header{
  position:sticky;top:0;z-index:10;
  padding:20px;
  text-align:center;
  background:rgba(10,10,10,.65);
  backdrop-filter:blur(14px);
}
h1{margin:0;font-size:28px}
#search{
  margin-top:14px;
  padding:14px;
  width:92%;
  max-width:460px;
  border-radius:14px;
  border:none;
  font-size:15px;
}
#content{padding:24px}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:22px;
}
.card{
  background:linear-gradient(145deg,rgba(255,255,255,.06),rgba(0,0,0,.4));
  border-radius:20px;
  overflow:hidden;
  cursor:pointer;
}
.card video{
  width:100%;
  height:180px;
  object-fit:cover;
}
.label{
  padding:12px;
  text-align:center;
  font-size:13px;
}
.folder{
  text-align:center;
  padding:40px 10px;
  font-size:18px;
}
.folder::before{
  content:"ðŸ“‚";
  display:block;
  font-size:52px;
}
#back{
  margin-bottom:18px;
  cursor:pointer;
}
#modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  z-index:1000000;
  align-items:center;
  justify-content:center;
}
#modal video{
  max-width:90%;
  max-height:70%;
  border-radius:16px;
  display:block;
  margin:auto;
}
#tags{
  margin-top:16px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
}
.tag{
  padding:6px 14px;
  border-radius:999px;
  font-size:13px;
  background:#7f4cff;
}
#age{
  position:fixed;
  inset:0;
  background:#000;
  z-index:1000001;
  display:flex;
  align-items:center;
  justify-content:center;
}
#age .box{
  background:#111;
  padding:34px;
  border-radius:18px;
  text-align:center;
}
button{
  padding:15px 24px;
  border:none;
  border-radius:12px;
  background:#7f4cff;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="app-root">

<div id="age">
  <div class="box">
    <h2>ConteÃºdo +18</h2>
    <button onclick="acceptAge()">Entrar</button>
  </div>
</div>

<header>
  <h1>Multiverso Gay NSFW</h1>
  <input id="search" placeholder="Buscar pastas ou vÃ­deos...">
</header>

<div id="content"></div>

<div id="modal" onclick="closeModal()">
  <div onclick="event.stopPropagation()">
    <video controls autoplay loop></video>
    <div id="tags"></div>
  </div>
</div>

</div>

<script>
const repo="maxwolfbr/maxwolfbr-Yiff-Gay-Animation";
const branch="main";
const api=`https://api.github.com/repos/${repo}/git/trees/${branch}?recursive=1`;
const TAGS_URL="https://raw.githubusercontent.com/maxwolfbr/maxwolfbr-Yiff-Gay-Animation/main/tags.json";

const content=document.getElementById("content");
const search=document.getElementById("search");
const modal=document.getElementById("modal");
const modalVideo=modal.querySelector("video");
const tagsContainer=document.getElementById("tags");

let items=[];
let tagsDB={ videos:{}, _defaults:{ by_folder:{} } };

function acceptAge(){
  localStorage.setItem("age_ok","1");
  document.getElementById("age").style.display="none";
}
if(localStorage.getItem("age_ok")==="1"){
  document.getElementById("age").style.display="none";
}

async function loadTags(){
  try{
    const cache=localStorage.getItem("video_tags_cache_v2");
    if(cache){
      tagsDB=JSON.parse(cache);
      return;
    }
    const res=await fetch(TAGS_URL);
    if(!res.ok) throw 0;
    tagsDB=await res.json();
    localStorage.setItem("video_tags_cache_v2",JSON.stringify(tagsDB));
  }catch(e){
    console.warn("Tags nÃ£o carregadas");
  }
}

async function load(){
  loadTags();
  const res=await fetch(api);
  const data=await res.json();
  items=data.tree.filter(f=>f.type==="blob" && /(mp4|webm|gif)$/i.test(f.path))
    .map(f=>{
      const p=f.path.split("/");
      return{
        name:p.pop(),
        folder:p.join("/")||"Raiz",
        path:f.path,
        url:`https://cdn.jsdelivr.net/gh/${repo}@${branch}/${f.path}`
      }
    });
  renderHome();
}

function renderHome(){
  content.innerHTML="";
  const grid=document.createElement("div");
  grid.className="grid";
  [...new Set(items.map(i=>i.folder))].forEach(f=>{
    const c=document.createElement("div");
    c.className="card folder";
    c.textContent=f;
    c.onclick=()=>openFolder(f);
    grid.appendChild(c);
  });
  content.appendChild(grid);
}

function openFolder(folder){
  content.innerHTML="";
  const back=document.createElement("div");
  back.id="back";
  back.textContent="â† Voltar";
  back.onclick=renderHome;
  content.appendChild(back);

  const grid=document.createElement("div");
  grid.className="grid";
  items.filter(i=>i.folder===folder).forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    const v=document.createElement("video");
    v.src=i.url;
    v.muted=true;
    v.preload="metadata";
    const l=document.createElement("div");
    l.className="label";
    l.textContent=i.name;
    c.append(v,l);
    c.onclick=()=>openVideo(i);
    grid.appendChild(c);
  });
  content.appendChild(grid);
}

function getTagsForVideo(item){
  const file=item.path.split("/").pop();
  return tagsDB.videos[item.path]
      || tagsDB.videos[file]
      || tagsDB._defaults.by_folder[item.folder.split("/").pop()]
      || [];
}

function openVideo(item){
  modalVideo.src=item.url;
  modalVideo.loop = true;

  modalVideo.onended = () => {
    modalVideo.currentTime = 0;
    modalVideo.play();
  };

  modal.style.display="flex";
  renderTags(item);
}

function renderTags(item){
  tagsContainer.innerHTML="";
  getTagsForVideo(item).forEach(t=>{
    const el=document.createElement("div");
    el.className="tag";
    el.textContent=t;
    tagsContainer.appendChild(el);
  });
}

function closeModal(){
  modalVideo.pause();
  modalVideo.src="";
  tagsContainer.innerHTML="";
  modal.style.display="none";
}

search.addEventListener("input",()=>{
  const q=search.value.toLowerCase();
  content.innerHTML="";
  const grid=document.createElement("div");
  grid.className="grid";

  [...new Set(items.map(i=>i.folder))].filter(f=>f.toLowerCase().includes(q)).forEach(f=>{
    const c=document.createElement("div");
    c.className="card folder";
    c.textContent=f;
    c.onclick=()=>openFolder(f);
    grid.appendChild(c);
  });

  items.filter(i=>i.name.toLowerCase().includes(q)).forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    const v=document.createElement("video");
    v.src=i.url;
    v.muted=true;
    const l=document.createElement("div");
    l.className="label";
    l.textContent=i.name;
    c.append(v,l);
    c.onclick=()=>openVideo(i);
    grid.appendChild(c);
  });

  content.appendChild(grid);
});

load();
</script>

</body>
</html>
